(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4902:function(){},522:function(){},753:function(){},802:function(){},4633:function(){},5688:function(){},5042:function(){},6548:function(e,t,a){Promise.resolve().then(a.bind(a,3504))},3504:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var n=a(3827),r=a(4090),i=a(8614),s=a(3442),l=a(8324),o=a(8620).Buffer;function c(){let[e,t]=(0,r.useState)(null),[a,c]=(0,r.useState)(null),[u,f]=(0,r.useState)(null),[d,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{let e="https://teachablemachine.withgoogle.com/models/enIZ_4AU-/";t(await l.zD(e+"model.json",e+"metadata.json"))})()},[]);let b=()=>new Date().getFullYear()+"-"+new Date().getMonth()+"-"+new Date().getDate()+"_"+new Date().getHours()+"-"+new Date().getMinutes()+"-"+new Date().getSeconds(),m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=e.getPixelsArray(),n=0,r=0,i=0,s=0;for(let e=0;e<800;e++){for(let t=0;t<400;t++)if(10>a[400*e+t].reduce((e,t)=>e+t,0)){i=e;break}if(i)break}for(let e=799;e>0;e--){for(let t=0;t<400;t++)if(10>a[400*e+t].reduce((e,t)=>e+t,0)){s=e;break}if(s)break}for(let e=0;e<400;e++){for(let t=0;t<800;t++)if(10>a[400*t+e].reduce((e,t)=>e+t,0)){n=e;break}if(n)break}for(let e=399;e>0;e--){for(let t=0;t<800;t++)if(10>a[400*t+e].reduce((e,t)=>e+t,0)){r=e;break}if(r)break}let l=Math.max(n-t,0),o=Math.max(i-t,0),c=Math.min(r-n+2*t,400-n),u=Math.min(s-i+2*t,800-i);return e.crop({x:l,y:o,width:c,height:u})},h=(0,r.useRef)(),p=()=>{h.current.clearCanvas()},w=async()=>{let e=await Promise.resolve(h.current.exportImage("png")),t=m((await s.Ee.load(o.from(e.split(",")[1],"base64"))).resize({width:400})).toBase64("png"),a=document.createElement("a");a.href="data:image/png;base64,"+t,a.download=b().toString()+".png",a.click(),p()},x=async()=>{let t;g(!0);let a=await Promise.resolve(h.current.exportImage("png")),n=m((await s.Ee.load(o.from(a.split(",")[1],"base64"))).resize({width:400,height:800})).toBase64("png"),r=document.createElement("img");r.src="data:image/png;base64,"+n,f(r),console.log(r.src);for(let a=0;a<5;a++)t=await e.predict(r);c(()=>t.sort((e,t)=>t.probability-e.probability)[0]),g(()=>!1),console.log(t)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-start p-2 space-x-2 min-w-full",children:[(0,n.jsx)("button",{className:"rounded bg-green-500 text-white p-2 flex-1",onClick:p,children:"Clear"}),(0,n.jsx)("button",{className:"rounded bg-red-500 text-white p-2 flex-1",onClick:w,children:"Export"}),e&&(0,n.jsx)("button",{className:"rounded bg-blue-500 text-white p-2 flex-1",onClick:x,children:"Predict"})]}),(0,n.jsxs)("div",{className:"flex justify-start gap-4 ",children:[u&&(0,n.jsx)("img",{src:u.src,className:"w-10 border-red-500 border-2"}),d?"Loading...":a&&(0,n.jsxs)("div",{children:[a.className," Detected with ",100*a.probability,"% probability"]})]}),e?(0,n.jsx)(i.x,{ref:h,className:"!w-screen aspect-[1/2]",strokeWidth:8,strokeColor:"black"}):"Loading..."]})}}},function(e){e.O(0,[427,213,919,602,711,99,387,971,69,744],function(){return e(e.s=6548)}),_N_E=e.O()}]);